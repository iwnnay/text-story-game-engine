!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";const s={perception:100};function r(t,e="perception"){const i=t*function(t){return s[t]/100}(e);return Math.ceil(100*Math.random())<=i}class o{constructor(t){this.data=t}set data(t){this.loadedData=t,this.hasSeen=t.hasSeen||!1,this.isVisible=t.isVisible||!1,this.items=[],(t.items||[]).forEach(t=>{this.items.push(new o(t))})}get data(){return{...this.loadedData,hasSeen:this.hasSeen,isVisible:this.isVisible}}get name(){return this.loadedData.name}get visibility(){return this.loadedData.visibility||100}describe(){return this.calculateItemVisibility(),this.loadedData.describe}describeItems(){return this.items.filter(t=>t.isVisible).map(t=>({isNew:!t.hasSeen,overview:t.name}))}markVisible(){this.isVisible=!0}calculateItemVisibility(){this.items.forEach(t=>{t.isVisible||r(t.visibility)&&t.markVisible()})}}class n extends o{set data(t){this.loadedData=t,this.hasSeen=t.hasSeen||!1,this.isVisible=!0,this.items=[],(t.items||[]).forEach(t=>{this.items.push(new o(t))})}get data(){return{...this.loadedData,hasSeen:this.hasSeen,isVisible:!0}}}class a{constructor(t,e){this.data=t,this.startRoom=e}set data(t){this.loadedData=t,this.hasSeen=t.hasSeen||!1,this.rooms=[],t.rooms.forEach(t=>{const e=new n(t);this.rooms.push(e),this.isCurrentRoom(e)&&(this.currentRoom=e)})}get data(){return{...this.loadedData,currentRoom:this.currentRoom.name,rooms:this.rooms.map(t=>t.data),hasVisited:this.hasVisited}}isCurrentRoom(t){return this.blah=t,!0}}var c=class{constructor(t){this.location=new a(t),this.room=this.location.currentRoom,this.focus=this.currentRoom}set room(t){this.currentRoom=t}describe(){return{focus:this.current}}get current(){return{isNew:!this.focus.hasSeen,overview:this.focus.describe(),items:this.focus.describeItems()}}};i.d(e,"a",function(){return u});class u{constructor(t,e){this.api=t,this.situation=null,this.load(e)}processCommand(t){this.situation.objectsAndActions}load(t){this.situation=new c(this.api.getLocation(t))}}},function(t,e,i){"use strict";class s{getLocation(t){if("string"==typeof t){if(!this.locations||0===this.locations.length)throw new Error("Location data could not be found");const e=this.locations.find(e=>e.name===t);if(!e)throw new Error(`Could not load location data for ${t}`);return e}throw new Error(`We don't current support locations requested like: ${t}`)}}i.d(e,"a",function(){return r});class r extends s{constructor(t){if(super(),!t.locations)throw new Error("LocalDataProvider expects first argument to have a key of Locations");this.locations=t.locations}}},function(t,e,i){"use strict";i.r(e),function(t){var e=i(0),s=i(1);e.a.dataProviders={Local:s.a},t.exports=e.a,Object.defineProperty("default",t.exports,{get:e.a})}.call(this,i(3)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}}]);